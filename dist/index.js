!function(t,e,n,a){try{t.VRControls=function(t){var n,a=null;"VRFrameData"in e&&(a=new VRFrameData),navigator.getVRDisplays&&navigator.getVRDisplays().then(function(t){t.length>0&&(n=t[0])}),this.update=function(){var e;if(n&&(n.getFrameData?(n.getFrameData(a),e=a.pose):n.getPose&&(e=n.getPose()),e&&null!==e.orientation)){for(var i=0;i<3;++i)e.orientation[i]=Math.min(.2,Math.max(-.2,e.orientation[i]));t.quaternion.fromArray(e.orientation)}},this.resetPose=function(){n&&n.resetPose()}};var i,r,s,o=e.AudioContext||e.webkitAudioContext,h=e.OfflineAudioContext||e.webkitOfflineAudioContext;.2,i=((t=1,e=.05,n=220,a=0,i=0,o=.1,h=0,u=1,c=0,E=0,l=0,f=0,v=0,T=0,w=0,$=0,A=0,M=1,O=0,I=0)=>{let N,p,d=2*Math.PI,S=c*=500*d/s**2,R=(0<w?1:-1)*d/4,g=n*=(1+2*e*Math.random()-e)*d/s,D=[],L=0,H=0,m=0,U=1,b=0,k=0,C=0;for(E*=500*d/s**3,w*=d/s,l*=d/s,f*=s,v=s*v|0,p=(a=99+s*a)+(O*=s)+(i*=s)+(o*=s)+(A*=s)|0;m<p;D[m++]=C)++k%(100*$|0)||(C=h?1<h?2<h?3<h?Math.sin((L%d)**3):Math.max(Math.min(Math.tan(L),1),-1):1-(2*L/d%2+2)%2:1-4*Math.abs(Math.round(L/d)-L/d):Math.sin(L),C=(v?1-I+I*Math.sin(2*Math.PI*m/v):1)*(0<C?1:-1)*Math.abs(C)**u*t*.2*(m<a?m/a:m<a+O?1-(m-a)/O*(1-M):m<a+O+i?M:m<p-A?(p-m-A)/o*M:0),C=A?C/2+(A>m?0:(m<p-A?1:(p-m)/A)*D[m-A|0]/2):C),L+=(N=(n+=c+=E)*Math.sin(H*w-R))-N*T*(1-1e9*(Math.sin(m)+1)%2),H+=N-N*T*(1-1e9*(Math.sin(m)**2+1)%2),U&&++U>f&&(n+=l,g+=l,U=0),!v||++b%v||(n=g,c=S,U=U||1);return(t=r.createBuffer(1,p,s)).getChannelData(0).set(D),(n=r.createBufferSource()).buffer=t,n.connect(r.destination),n.start(),n});var u=[,,714,.09,.14,.42,1,.53,5.9,.1,199,.03,.1,.1,,,.1,.92,.08,.01],c=[,,113,.02,,.3,,.2,,.3,,,,,,,.03,.9,,.04],E=[,,73,,,.32,4,.62,-.2,,,,,,,,,.92,.02,.29],l=[,,47,.06,.03,.01,1,.72,74,92,432,.03,.03,,-.8],f=[,,1433,.11,,0,,.55,-5.7,,-431,.09,.23,,,,.14,,.16],v=-1,T=4,w=s=44100,$={t:null,e:!1,n:function(){$.i||($.i=!0,r=new o,$.t=new o,function(){var t=0,e=function(){2===++t&&($.e=!0,$.i&&($.r.start(),$.s.start()))};function n(t,e,n){var a=(e?44:.5)*T,i=new h(1,w*a,w),r=[];t.forEach(function(n,a){var s=[],o=[];r.push(o);var h=i.createGain();h.gain.value=n.volumn||1,h.gain.maxValue=1,h.connect(i.destination);for(var u=n.maxOscillatorCnt||1,c=0;c<u;++c){var E=i.createOscillator();o.push(E),n.wave&&(E.type=n.wave);var l=i.createGain();s.push(l),E.connect(l),l.connect(h)}for(var f=0,w=n.envelope,$=0;$<n.patterns.length;++$){var M=n.patterns[$];if(null!=M&&M!=v){var O=1;M.span&&(O=M.span,M=M.pattern),M.forEach(function(n,i){var r=1/n.length,h=T*O/M.length*4;e&&0===a&&$===t[0].patterns.length-1&&(h/=4);for(var c=w.attack*h,E=f+c,l=w.decay*h,v=E+l,I=w.sustain*h,N=w.value*r,p=v+I,d=w.release*h,S=0;S<u;++S)if(S<n.length){var R=A(n[S]);o[S].frequency.setValueAtTime(R,f);var g=s[S].gain;g.setValueAtTime(0,f),g.linearRampToValueAtTime(r,E),g.linearRampToValueAtTime(N,v),g.setValueAtTime(N,p),g.linearRampToValueAtTime(0,p+d)}else s[S].gain.setValueAtTime(0,f),s[S].gain.setValueAtTime(0,f+h);f+=h})}else{for(var I=0;I<u;++I)s[I].gain.setValueAtTime(0,f);f+=4*T}}}),r.forEach(function(t){t.forEach(function(t){t.start()})}),i.startRendering(),i.oncomplete=function(t){var a=$.t.createBufferSource();a.buffer=t.renderedBuffer,a.loop=!0;var i=$.t.createGain();i.gain.value=0,a.connect(i),i.connect($.o),e?(i.gain.value=1,$.h=i,$.r=a):($.u=i,$.s=a),n(a)}}$.o=$.t.createGain(),$.o.gain.value=.7,$.o.connect($.t.destination),a=[7,4,5,2,3,0,3,4],i=function(t,e){return e=e||0,a.map(function(n){return t.map(function(t){return n+7*e+t})})},r=v,s=i([0],-1),o=i([0],-1),u=i([0],0),c={span:2,pattern:s},E={span:2,pattern:i([0,3],-1)},n([{patterns:[c,E,E,E,E,[[3,0,-4]]],volumn:.2,maxOscillatorCnt:3,envelope:{attack:.3,decay:.05,sustain:.05,release:.5,value:.9}},{patterns:[,,u,o,,,o,u,o,r],volumn:.1,envelope:{attack:0,decay:.5,sustain:0,release:.3,value:1}}],!0,e),n([{patterns:[{pattern:[[-5]],span:1/8}],volumn:.15,envelope:{attack:.4,decay:.05,sustain:.05,release:.5,value:.9},wave:"triangle"}],!1,e);var a,i,r,s,o,u,c,E}())},l:function(t){$.e&&i(...t)},f:function(t){$.e&&$.u&&t!==$._lastIndicatorRatio&&($.u.gain.value=t?2*t+.5:0,$.s.playbackRate.value=1+4*t,$.h.gain.value=1-.5*t,$._lastIndicatorRatio=t)},r:null,h:null,s:null,u:null,_lastIndicatorRatio:null,o:null,i:!1};function A(t,e){for(e=e||0;t<=0;)--e,t+=7;for(;t>7;)++e,t-=7;const n=[0,2,3,5,7,8,10][t-1];return 440*Math.pow(2,e+n/12)}var M,O,I=[],N=[];var p,d={v:0,T:1,w:2,$:3,A:4,M:5,O:6,I:7,N:8},S="?t=0"==e.location.search,R=[];function g(t){if(!S){var e=n.getElementById("r");p=t;var a="";switch(t){case d.v:case d.N:return void(e.style.display="none");case d.T:a="USE A/S/D/W TO MOVE AROUND.";break;case d.w:a="YOUR MISSION IS TO FIND 10 DNA SAMPLES ON THE EARTH. IF ONE IS NEAR YOU, THE BLUE LIGHT ON YOUR FLYING SAUCER WILL BLINK FASTER AND THE RADAR AUDIO MAY ALSO HELP.",setTimeout(()=>{R[d.w]=1},1e4);break;case d.$:a="FIND THE PLACE WHERE THE LIGHT BLINKS FASTEST AND THE AUDIO HAS THE HIGHEST FREQUENCY.";break;case d.A:a="HOLD SPACE AND RELEASE AT THE CORRECT MOMENT TO CATCH IT!";break;case d.M:a="OOPS... YOU WERE WITNESSED BY HUMANS. IF TOO MANY PEOPLE KNOW ABOUT YOU, THE SECRET AGREEMENT WITH SEVERAL GOVERNMENTS THAT ALLOWS YOU TO COLLECT DNA WILL BE TERMINATED. SO, WATCH OUT FOR THE POPULARITY OF EACH TWEET AND MAKE IT 404 WHEN NECESSARY.",setTimeout(()=>{R[d.M]=1},15e3);break;case d.O:a="FLY OVER THE RED SPOT AND HOLD SPACE TO MAKE IT 404, THANKS TO THE GREAT TECHNOLOGY OF OUR THREE-BODY GALAXY.";break;case d.I:a="GOOD JOB! NOW, COMPLETE YOUR GOAL OF COLLECTING 10 DNA SAMPLES. REMEMBER YOU ONLY HAVE TO MAKE THE TWEETS 404 WHEN NECESSARY. DON'T WASTE TOO MUCH TIME ON IT.",setTimeout(()=>{g(d.N),S=!0},15e3)}e.innerText=a,e.style.display="block"}}var D,L,H,m,U,b,k,C,W,Y,F,y=function(t){return n.getElementById(t)},G="block",P="none",V="#fff",B=e.innerWidth,_=e.innerHeight,x=2,K=10,z=10.1,J=9.8,Q=11,X=10,j=a/600,q=j/30,Z=.42*a,tt=0,et=0,nt=2,at=9,it=5e6,rt=20,st=15,ot=(rt-st)/20,ht=.36,ut=0,ct=(ht-ut)/20,Et={p:0,d:1,S:2,R:3},lt={g:0,D:1,L:2,H:3,m:4,U:5,k:6,C:7,W:8,Y:9,F:10},ft={G:0,P:1,V:2,B:3,_:4,K:5},vt=3,Tt=60,wt=new t.Vector3(1,0,0),$t=new t.Vector3(0,1,0),At=new t.Vector3(0,0,0),Mt=new t.Vector3(1,1,1),Ot=Math.max(2,Math.round(_/250));e.rttOn=!0;var It,Nt,pt,dt,St,Rt,gt,Dt,Lt,Ht,mt,Ut,bt,kt,Ct,Wt,Yt,Ft,yt,Gt,Pt=[],Vt=new t.Group,Bt=new t.Group,_t=new t.Group,xt=0,Kt={},zt={phi:0,theta:0},Jt=ft.G,Qt=Et.p,Xt=lt.g,jt=new t.Vector3(-50,-.65,Q+2),qt=new t.Vector3(0,0,rt),Zt=new t.Vector3(0,0,0),te=new t.Vector3(-100,0,-250),ee=new t.Vector3(-50,0,Q),ne=ge(Q,Z,tt),ae=new t.Vector3(-3,1,16),ie=!1,re={J:"#DD4391",Q:"#0e1a25",X:["#31d9d9","#32c5d9","#44a9c8","#2694b9","#067499"],j:"#9be889"},se=y("g"),oe=!0,he=[87,38,83,40,65,37,68,39],ue={q:new t.Group,Z:new t.SphereGeometry(.1,16,16),tt:new t.MeshToonMaterial({color:"#ffadd2"}),et:1/0,nt:!1,at:!1,it:null,rt(){Vt.add(this.q),this.q.layers.set(nt),this.st(Z+.42,tt+.42);for(var t=me(K,Z,tt),e=0;e<X-1;++e){do{var n=Le(),a=Le(),i=ge(K,n,a)}while(i.angleTo(t)<=.5);this.st(n,a)}},ot(){this.q.remove(...this.q.children);for(var t=0;t<X;++t)this.st(Le(),Le());this.it=null},st(e,n){var a=new t.Mesh(this.Z,this.tt);a.position.setFromSphericalCoords(K,e,n),a.visible=!1,this.q.add(a)},ht(t){this.q.remove(t)},ut(){return this.q.children.length},ct(){this.et=Ee(this.q.children),this.nt=this.et<=.5,this.at=this.et<=.045,this.Et()},Et(){if(Xt===lt.U&&this.at&&!this.it){if(this.it=le(this.q.children),!this.it)return;var e=me(K,Z,tt);this.it.position.set(e.x,e.y,e.z),this.it.visible=!0}if(this.it){const e=(new t.Spherical).setFromVector3(this.it.position);e.radius<Q?(e.radius+=.02,this.it.position.setFromSpherical(e)):(this.ht(this.it),this.it=null,Se(),ve.st(),!this.ut()&&setTimeout(()=>Oe(ft.B,1),500))}}},ce={q:new t.Group,Z:new t.SphereGeometry(.15,16,16),tt:new t.MeshToonMaterial({color:"#ff4d4f",transparent:!0,opacity:.7}),et:1/0,it:null,lt:y("p"),ft:Date.now(),vt:{Tt:null,wt:!1,$t:null},At:null,rt({At:t}){this.At=t,this.q.layers.set(nt),Vt.add(this.q)},ot(){for(var t=this.q.children,e=t.length-1;e>=0;e--)this.ht(t[e]);this.it=null},ut(){return this.q.children.length},st(e,n){var a=new t.Mesh(this.Z,this.tt);a.position.setFromSphericalCoords(K,e,n),a._viewed=ke(1,10),a._maxV=ke(100,1e5),a._p=Ue("div",this.lt,"p"),this.q.add(a),this.Mt(a);var i=this.At.st(a._viewed);a._n=i},ht(t){t&&(t._p&&this.lt.removeChild(t._p),t._p=null,t._n=null,this.q.remove(t))},Ot(){return this.q.children.reduce((t,e)=>t+(e._d?0:e._viewed),0)},ct(){if(Re()){if(this.ut()<8){var e=Math.floor(xt/30);if(e&&!Kt[e]){var n=_t.children.sort((t,e)=>t._t-e._t)[0];if(n){var a=new t.Spherical;a.setFromVector3(n.position),a.phi+=De(.6),a.theta+=De(.6),this.st(a.phi,a.theta),_t.remove(n)}}Kt[e]=!0}this.et=Ee(this.q.children),this.Et(),this.It()}},Et(){if(this.it=this.et<.03?le(this.q.children):null,Xt===lt.Y){var t=this.vt;Pt[32]?t.wt?Date.now()-t.Tt>=1e3&&this.Nt():this.pt():this.dt()}},pt(){var{vt:t,it:e}=this;e&&(t.wt=!0,e._p.classList.add("pl"),t.Tt=Date.now())},dt(){var{vt:t,it:e}=this;e&&(e._p.classList.remove("pl"),t.wt=!1,t.$t=!1)},Nt(){var{vt:t,it:e,At:n}=this;e&&(t.wt=!1,t.$t=!0,e._p.classList.add("pf"),e.visible=!1,e._d=!0,n.St(e._n),setTimeout(()=>{e&&(e._p&&e._p.classList.add("po"),setTimeout(()=>this.ht(e),500))},3e3),$.l(f),p!==d.M&&p!==d.O||setTimeout(()=>g(d.I),1e3),Se())},It(){var t=Date.now()-this.ft>1e3;t&&(this.ft=Date.now());var e=!1;this.q.children.forEach(n=>{var a=He(n),i=n._p,{style:r}=i;r.left=Math.round(a.x)+"px",r.top=Math.round(a.y+10)+"px",r.opacity=a.z<5?.2:1,n._d||n===this.it&&Xt===lt.Y||!t||(n._viewed+=ke(0,n._maxV),this.Mt(n),this.At.Rt(n._n,i.innerText),e=!0)}),e&&(Se(),ce.Ot()>=it&&setTimeout(()=>Oe(ft.B),500))},Mt(t){var e=t._p;if(t._viewed>=1e6){const n=Math.round(t._viewed/1e5)/10+"M";e.setAttribute("class","p R"),e.innerText=n+" VIEWED"}else if(t._viewed>=1e4){const n=Math.round(t._viewed/100)/10+"K";e.setAttribute("class","p y"),e.innerText=n+" VIEWED"}else e.innerText=t._viewed+" VIEWED"}};function Ee(e){return e.reduce(function(e,n){var a=Bt.position.angleTo(n.localToWorld(new t.Vector3));return n.userData.angle=a,Math.min(e,a)},1/0)}function le(t){return t.reduce(function(t,e){return e._d||t&&!(e.userData.angle<t.userData.angle)?t:e},null)}var fe={gt:y("t"),Dt(){this.gt.style.display=G},Lt(){this.gt.style.display=P},ot(){this.Lt(),this.gt.innerHTML=""},st(){var t=Ue("div",this.gt,"T"),e=Ue("div",t,"l");Ue("img",e,"a").setAttribute("src",(null==M&&(M=Math.floor(Math.random()*I.length)-1),++M>=I.length&&(M=0),I[M])),Ue("div",e,"v");var n=Ue("div",t,"r");return Ue("div",n,"n").innerText="@"+be(["ALICE","BOB","CAROL","DAVE","EVE","FRANK","GRACE","HEIDI"])+"_"+be(["LOVES","HATES","MISSING","THE"])+"_"+be(["CATS","DOGS","SLEEPING","OVILIA","YUMAO","YOU","JOKES","JS","GAMES"]),Ue("div",n,"c").innerText=be(["OMG!","OH NO!","OH SH*T...","CAN YOU BELIEVE THIS?","TELL ME I HAVEN'T WOKEN UP FROM MY DREAM.","ARE YOU KIDDING?","YOU WON'T BELIEVE THIS!","I CAN'T BELIEVE THIS EITHER... BUT","I CAN'T BELIEVE MY OWN EYES","!!!",""])+" "+be(["THERE IS AN ALIEN IN MY BACKYARD?!!","AN ALIEN IN THE DOWNTOWN!","MY SON SAID THAT HE SAW AN ALIEN THIS MORNING. GUESS HOW OLD IS HE?","GUESS WHAT/WHO I SAW TODAY!","I SAW A UFO FLYING OVER MY HOUSE JUST NOW!","WHAT'T THE *THING* FLYING OVER ME JUST NOW???","WAS IT AN ALIENE OR AEROPLANE?"]),t.parentNode.scrollTop=t.offsetTop,this.Dt(),$.l(l),t},Rt(t,e){t.getElementsByClassName("v")[0].innerText=e},St(t){t.className="T TT",this.Rt(t,"NA"),t.children[1].children[1].innerText="(404) NOT FOUND",t.parentNode.scrollTop=t.offsetTop}},ve={gt:y("h"),Dt(){this.gt.style.display=G},Lt(){this.gt.style.display=P},ot(){this.Lt(),this.gt.innerText=""},st(){Ue("img",this.gt,"a d").setAttribute("src",(null==O&&(O=Math.floor(Math.random()*N.length)-1),++O>=N.length&&(O=0),N[O])),this.Dt()}},Te={gt:y("w"),Ht:y("wt"),mt:y("wp"),Ut:16,bt:0,kt:0,Ct:.3,$t:null,Wt(t){var e=1.5+.075/(.03+t);this.bt=(this.Ut-e)/2,this.kt=this.Ut-this.bt;var n=this.Ht.style;n.marginLeft=this.bt+"vh",n.width=e+"vh"},Yt(){this.mt.style.animationPlayState="paused";var t=parseFloat(e.getComputedStyle(this.mt).left,10)/e.innerHeight*100;return t>=this.bt-this.Ct&&t<=this.kt},ct(){switch(this.Ft(),Xt){case lt.m:this.gt.style.opacity=1,Pt[32]||(this.$t=this.Yt());break;case lt.g:case lt.k:this.gt.style.opacity=0,this.mt.style.animationPlayState="running"}Xt!==lt.m&&(this.$t=null)},Ft(){if([lt.m,lt.k,lt.U].includes(Xt)){var t=He(Bt),e=this.gt.style;e.left=Math.round(t.x)+"px",e.top=Math.round(t.y)+"px"}}},we={gt:y("f"),Tt:null,wt:!1,ct(){if(Xt===lt.k){var t=this.gt,n=He(Bt),a=this.gt.style;a.left=Math.round(n.x)+"px",a.top=Math.round(n.y-e.innerHeight/12)+"px",t.className&&"o"!==t.className?Date.now()-this.Tt>=1e3&&(t.className="o",this.wt=!1):(this.wt=!0,t.className="i",this.Tt=Date.now())}}};function $e(){var t=B,n=_;B=e.innerWidth,_=e.innerHeight;var a=B/Ot,i=_/Ot;m.aspect=a/i,m.updateProjectionMatrix(),U.left=a/-2,U.right=a/2,U.top=i/2,U.bottom=i/-2,U.updateProjectionMatrix(),W.scale.x*=B/t,W.scale.y*=_/n,C.setSize(a,i),D.setSize(B,_),Y.width=B*x,Y.height=_*x,Se()}function Ae(){var n=yt.getDelta();Jt===ft.V?(function(){const t=m.position,e=m.rotation;Pt[32]&&oe?(t.z>st?(t.z=Math.max(t.z-ot,st),Qt=Et.S):Qt=Et.d,e.x<ht&&(e.x=Math.min(e.x+ct,ht))):Xt!==lt.H&&Xt!==lt.g||(t.z<rt?(t.z=Math.min(t.z+ot,rt),Qt=Et.R):Qt=Et.p,e.x>ut&&(e.x=Math.max(e.x-ct,ut)))}(),function(t){var e=q*t/.02;if(Pt[32])return Me(e,"phi"),void Me(e,"theta");Pt[87]||Pt[38]?zt.phi<j&&(zt.phi=Math.min(zt.phi+e,j)):Pt[83]||Pt[40]?zt.phi>-j&&(zt.phi=Math.max(zt.phi-e,-j)):Me(e,"phi");Pt[65]||Pt[37]?zt.theta<j&&(zt.theta=Math.min(zt.theta+e,j)):Pt[68]||Pt[39]?zt.theta>-j&&(zt.theta=Math.max(zt.theta-e,-j)):Me(e,"theta")}(n),zt.phi&&Vt.rotateOnWorldAxis(wt,zt.phi),zt.theta&&Vt.rotateOnWorldAxis($t,zt.theta),function(t){(function(){switch(Xt){case lt.g:zt.phi||zt.theta?Xt=lt.D:Pt[32]&&Qt===Et.d&&(ce.it?(Xt=lt.C,$.l(E)):Xt=lt.L);break;case lt.D:zt.phi||zt.theta||(Xt=lt.g);break;case lt.L:Pt[32]?Rt.scale.y>=1&&(ue.at?(Xt=lt.m,Te.Wt(ue.et)):(Xt=lt.k,$.l(c))):Xt=lt.H;break;case lt.m:null!=Te.$t&&(Xt=Te.$t?lt.U:lt.k,Te.$t&&$.l(u));break;case lt.k:we.wt||(Xt=lt.H);break;case lt.U:case lt.H:Rt.scale.y<=0&&(Xt=lt.g);break;case lt.C:Pt[32]?Dt.scale.y>=1&&(Xt=lt.Y):Xt=lt.W;break;case lt.Y:ce.vt.wt||(Xt=lt.W);break;case lt.W:Dt.scale.y<=0&&(Xt=lt.g)}})(),Bt.rotation.x=Ft.x-30*zt.phi,Bt.rotation.z=Ft.z+30*zt.theta,bt.paused=Xt!==lt.g,function(){const t=kt.isRunning();if(ue.nt){kt.timeScale=.55/(.05+ue.et),!t&&kt.play();var e=(kt.timeScale-1)/10;$.f(e)}else t&&kt.stop(),$.f(0)}(),function(t){switch(Xt){case lt.L:Ne(Rt,.6,t);break;case lt.H:Ne(Rt,.4,t,!0);break;case lt.m:pe(Ct);break;case lt.U:de(Ct),Ne(Rt,.9,t,!0);break;case lt.k:de(Ct)}}(t),function(t){switch(Xt){case lt.C:Ne(Dt,.3,t);break;case lt.W:de(Wt),Ne(Dt,.3,t,!0);break;case lt.Y:pe(Wt)}}(t)}(n),function(){if(!Re())return;var t=me(K,Z,tt);Yt&&(xt+=t.distanceTo(Yt));Yt=t}(),function(){if(!Re())return;var e=Date.now();e-Gt>=3e3&&(Gt=e,function(){var e;function n(){e.position.setFromSphericalCoords(K,Z,tt),Vt.worldToLocal(e.position),e._t=Date.now()}_t.children.length<at?(e=new t.Object3D,n(),_t.add(e)):(e=_t.children[0],n())}())}(),ue.ct(),ce.ct(),Te.ct(),we.ct(),Lt.update(n),mt.update(n),Ut.update(n),function(){switch(p){case d.T:!R[d.T]&&he.some(t=>Pt[t])&&(R[d.T]=1,setTimeout(()=>{g(d.w)},3e3));break;case d.w:X>ue.ut()?e():R[d.w]&&ue.nt&&g(d.$);break;case d.$:ue.at&&g(d.A);break;case d.A:X>ue.ut()?e():ue.at||g(d.$);break;case d.M:R[d.M]&&g(d.O)}function e(){g(d.v),setTimeout(()=>{R[d.A]=1;var e=new t.Spherical;e.setFromVector3(me(K,Z-.5,tt-.5)),ce.st(e.phi,e.theta),setTimeout(()=>{g(d.M)},1e3)},3e3)}}()):Jt===ft.P?function(t){Bt.position.add(Bt._v.clone().multiplyScalar(t)),Ie(Bt.position,ee,ne),m.position.add(m._v.clone().multiplyScalar(t)),Ie(m.position,jt,qt)}(n):Jt===ft.B&&function(t){Bt.position.add(Bt._v.clone().multiplyScalar(t)),Ie(Bt.position,ne,ae),Vt.position.add(Vt._v.clone().multiplyScalar(t)),Ie(Vt.position,Zt,te)}(n),function(t){for(var e=It.geometry.vertices,n=0;n<e.length;++n){var a=Nt[n];a.delta+=.002*t;var i=Math.min(.1*Math.sin(a.delta),z-J-.1);e[n].set(a.x+i,a.y+i,a.z+i)}It.geometry.verticesNeedUpdate=!0}(1e3*n),function(t){pt.rotation.x+=2e-5*t,pt.rotation.z+=12e-6*t,pt.children.forEach(function(e,n){e.rotation.y+=2e-4*t,e.rotation.x+=1e-4*t;var a=Nt[n],i=.8*Math.sin(a.delta/5+n/10)+.2;e.scale.setScalar(i)})}(1e3*n),Ht.update(n),function(t){if(Jt!==ft.G&&Jt!==ft.B&&Jt!==ft._)return;var e=(gt.scale.x-1)/.4;(e+=t/2)>1&&(e=0);var n=1+.4*e;gt.scale.set(n,n,1)}(n),e.rttOn&&(D.setRenderTarget(C),D.clear()),Jt===ft.V&&(!function(){switch(Xt){case lt.W:case lt.H:case lt.U:Pt[32]&&(oe=!1)}}(),k.update()),m.layers.set(nt),D.render(L,m),m.layers.set(et),D.render(L,m),e.rttOn&&(D.setRenderTarget(null),D.clear(),D.render(H,U)),D.setAnimationLoop(Ae)}function Me(t,e){zt[e]>0?zt[e]=Math.max(zt[e]-t,0):zt[e]<0&&(zt[e]=Math.min(zt[e]+t,0))}function Oe(t,e){Jt=t;var n=y("b"),a=y("u");function i(){k.resetPose(),Bt._v=ne.clone().sub(Bt.position).divideScalar(vt),m._v=qt.clone().sub(m.position).divideScalar(vt),gt.position.y=-.08,gt.scale.set(1.3,1.3,1),kt.stop()}if(Jt===ft.G)Bt.position.set(...ee.toArray()),m.position.set(...jt.toArray());else if(Jt===ft.P){var r=y("a");r.parentNode.removeChild(r),i(),setTimeout(function(){Oe(ft.V)},1e3*vt)}else Jt===ft.B?(Vt._v=te.clone().sub(Vt.position).divideScalar(Tt),Bt._v=ae.clone().sub(Bt.position).divideScalar(Tt/4),gt.scale.set(1,1,1),kt.play(),n.style.display=G,a.style.display=P,n.className=e?"w":"f",se.style.display=P,$.f(0),Gt=null,xt=0,Yt=null,Kt={},oe=!0,_t.remove(..._t.children),Qt=Et.p,Rt.scale.set(0,0,0),Dt.scale.set(0,0,0),ue.ot(),ce.ot(),fe.ot(),ve.ot(),setTimeout(function(){Oe(ft._)},1e3*Tt)):Jt===ft.V&&(n.style.display=P,a.style.display=G,$.f(0),i(),Bt.position.set(...ne.toArray()),m.position.set(...qt.toArray()),Vt.position.set(...Zt.toArray()),a.style.display=G,Se(),se.style.display=G,g(d.T))}function Ie(t,e,n){["x","y","z"].forEach(function(a){e[a]>n[a]?t[a]=Math.max(t[a],n[a]):t[a]=Math.min(t[a],n[a])})}function Ne(t,e,n,a){if(t._s)t.scale.add(t._s.clone().multiplyScalar(n)).clamp(At,Mt),(t.scale.equals(At)||t.scale.equals(Mt))&&(t._s=null);else{var i=a?At:Mt;t._s=i.clone().sub(t.scale).divideScalar(e)}}function pe(t){t.isRunning()&&!t.paused||(t.stop(),t.play())}function de(t){t.paused||(t.paused=!0)}function Se(){F.clearRect(0,0,Y.width,Y.height);var t=[20,30];r("DNA SAMPLES COLLECTED",t[0],t[1],"#ddd",16);for(var e=X-ue.ut(),n=0;n<10;++n){var a=n<e?re.X[0]:"rgba(200,200,200,.1)";s(t[0]+22*n,42,18,18,2,a)}var i=B-t[0]-216;function r(t,e,n,a,i){F.fillStyle=a,F.font=i*x+"px monospace",F.fillText(t,e*x,n*x)}function s(t,e,n,a,i,r,s){F.fillStyle=r;var o=n*x,h=a*x;F.fillRect(t*x,e*x,o,h);var u=t+n-i,c=e+a-i,E=i*x;F.clearRect(t*x,e*x,E,E),F.clearRect(t*x,c*x,E,E),s||(F.clearRect(u*x,e*x,E,E),F.clearRect(u*x,c*x,E,E))}r("PUBLIC PRESSURE",i+70,t[1],"#ddd",16),s(i,42,216,8,2,"rgba(200,200,200,.1)"),s(i,42,216*(Math.min(ce.Ot(),it)/it),8,2,re.J,1)}function Re(){return S||R[d.A]}function ge(e,n,a){var i=new t.Vector3;return i.setFromSphericalCoords(e,n,a),i}function De(e){return t.MathUtils.randFloatSpread(e)}function Le(){return De(2*a)}function He(e){var n=B/2,a=_/2,i=new t.Vector3;e.getWorldPosition(i);var r=i.z;return i.project(m),i.x=i.x*n+n,i.y=-i.y*a+a,i.z=r,i}function me(t,e,n){return Vt.worldToLocal(ge(t,e,n))}function Ue(t,e,a){var i=n.createElement(t);return e&&e.appendChild(i),a&&(i.className=a),i}function be(t){return t[Math.floor(Math.random()*t.length)]}function ke(t,e){return Math.floor(Math.random()*(e-t+1))+t}(function(){function t(t,e){var a=n.createElement("canvas");return a.width=t,a.height=e,a}function e(e,n,a){var i=t(64*n,64).getContext("2d");i.textAlign="left",i.textBaseline="top",i.font="64px serif",i.fillText(e,0,2);for(var r=t(16,16),s=r.getContext("2d"),o=0;o<n;++o){s.clearRect(0,0,16,16);for(var h=i.getImageData(64*o,0,64,64).data,u=i.createImageData(16,16),c=u.data,E=0;E<16;++E)for(var l=Math.round(4*E),f=0;f<16;++f)for(var v=4*(64*Math.round(4*f)+l),T=4*(16*f+E),w=0;w<4;++w)c[T+w]=h[v+w];s.putImageData(u,0,0),a.push(r.toDataURL())}}e("ðŸ‘¨â€ðŸŒ¾ðŸ‘©â€âœˆï¸ðŸ‘©â€ðŸ«ðŸ•µï¸â€â™€ï¸ðŸ‘©â€ðŸ’»ðŸ‘¨â€ðŸŽ¨ðŸ‘©â€ðŸ’¼ðŸ‘¨â€ðŸš’ðŸ§™â€â™‚ï¸ðŸ‘¨â€ðŸŽ“ðŸ‘¨â€ðŸš€ðŸ§›â€â™‚ï¸ðŸ‘¨â€ðŸŽ¤ðŸ‘·ðŸ‘¨â€âš–ï¸ðŸ§•",16,I),e("ðŸ¼ðŸ¦‹ðŸ¦ŠðŸ¶ðŸŒ»ðŸ·ðŸðŸ”ðŸ™ðŸ¡",10,N)})(),function(){L=new t.Scene,H=new t.Scene,(m=new t.PerspectiveCamera(75,B/_,.1,1e6)).layers.enable(nt);var e=new t.BoxGeometry(5e3,5e3,5e3),n=new t.MeshBasicMaterial({color:re.Q,side:t.BackSide}),a=new t.Mesh(e,n);L.add(a);var i=B/Ot,r=_/Ot;(U=new t.OrthographicCamera(i/-2,i/2,r/2,r/-2,-1e4,1e4)).position.z=100,C=new t.WebGLRenderTarget(i,r,{minFilter:t.NearestFilter,magFilter:t.NearestFilter,format:t.RGBFormat});var s=new t.PlaneBufferGeometry(i,r),o=new t.MeshBasicMaterial({map:C.texture});(W=new t.Mesh(s,o)).position.z=-100,H.add(W)}(),(b={}).ambient=new t.AmbientLight(V,.7),b.ambient.layers.enable(nt),b.ambient.layers.disable(et),L.add(b.ambient),b.key=new t.DirectionalLight(V,.4),b.key.position.set(0,.5,1),b.key.layers.enableAll(),b.key.castShadow=!0,L.add(b.key),b.spot=new t.SpotLight("#fc6",.25,100,a/12,.5,2),b.spot.position.set(0,5,20),b.spot.lookAt(0,0,0),b.spot.shadow.mapSize.width=1024,b.spot.shadow.mapSize.height=1024,b.spot.layers.enableAll(),b.fillTop=new t.DirectionalLight("#888",1),b.fillTop.position.set(.5,1,.75),b.fillBottom=new t.DirectionalLight("#555",1),b.fillBottom.position.set(-.5,-1,-.75),b.fillTop.layers.enable(et),b.fillBottom.layers.enable(et),b.fillTop.layers.disable(nt),b.fillBottom.layers.disable(nt),Vt.add(b.fillTop),Vt.add(b.fillBottom),function(){var e=new t.IcosahedronGeometry(J,4);Nt=[];for(var n=0;n<e.vertices.length;++n)Nt.push({x:e.vertices[n].x,y:e.vertices[n].y,z:e.vertices[n].z,delta:Math.random()*a*2});var i=new t.MeshPhongMaterial({color:re.X[0],flatShading:!0,vertexColors:!0,shininess:.8});(It=new t.Mesh(e,i)).layers.set(nt),It.receiveShadow=!0,Vt.add(It)}(),function(){var e=new t.Mesh(new t.SphereGeometry(.25,32,32),new t.MeshToonMaterial({color:"#bfbfbf"}));e.position.y=-.05;var n=new t.Mesh(new t.ConeGeometry(.5,.25,32),new t.MeshToonMaterial({color:"#8c8c8c"}));(gt=new t.Mesh(new t.TorusGeometry(.25,.05,32,64),new t.MeshBasicMaterial({color:re.X[0],transparent:!0,opacity:0}))).rotateX(Math.PI/2),gt.position.y=-.06,(Rt=new t.Mesh(new t.ConeGeometry(.45,.8,32),new t.MeshToonMaterial({color:"#faad14",transparent:!0,opacity:.5}))).position.y=-.35,Rt.scale.set(0,0,0),(Dt=new t.Mesh(new t.CylinderGeometry(.15,.15,.76,32),new t.MeshToonMaterial({color:"#dd4491",transparent:!0,opacity:.5}))).position.y=-.4,Dt.scale.set(0,0,0),Bt.position.set(...ne.toArray()),Bt.rotation.x=1,Bt.layers.set(et),Bt.add(e,n,gt,Rt,Dt),L.add(Bt),Ft=Bt.rotation.clone(),function(){Lt=new t.AnimationMixer(Bt);var e=Bt.position,n=ge(Q+.28,Z,tt),a=new t.VectorKeyframeTrack(".position",[0,.8],[e.x,e.y,e.z,n.x,n.y,n.z]),i=new t.AnimationClip("UfoIdle",.8,[a]);(bt=Lt.clipAction(i)).loop=t.LoopPingPong,bt.play()}(),Ht=new t.AnimationMixer(gt),(kt=Ht.clipAction(new t.AnimationClip("UfoIndicator",1,[new t.NumberKeyframeTrack(".material.opacity",[0,1],[0,1])]))).loop=t.LoopPingPong,kt.play(),mt=new t.AnimationMixer(Rt),(Ct=mt.clipAction(new t.AnimationClip("UfoRay",1.2,[new t.VectorKeyframeTrack(".scale",[0,1.2],[1,1,1,.5,1,.5])]))).loop=t.LoopPingPong,Ut=new t.AnimationMixer(Dt),(Wt=Ut.clipAction(new t.AnimationClip("UfoLaser",.3,[new t.VectorKeyframeTrack(".scale",[0,.3],[1,1,1,.4,1,.4])]))).loop=t.LoopPingPong}(),function(){pt=new t.Group,Vt.add(pt);for(var e=K+2,n=new t.MeshPhongMaterial({color:new t.Color(V),flatShading:!0}),i=0;i<50;++i)for(var r=De(2*a),s=De(2*a),o=.5*Math.random()+.8,h=0;h<5;++h){var u=[.4,.6,.8,.4][h]+De(.2),c=new t.IcosahedronGeometry(u*o,0),E=new t.Mesh(c,n);r+=.04+De(.03*a);var l=De(.1);E.position.setFromSphericalCoords(e+l,r,s),E.rotation.set(De(2*a),De(2*a),De(2*a)),E.layers.set(nt),pt.add(E)}}(),function(){var e=new t.MeshPhongMaterial({color:re.j,flatShading:!0,shininess:0}),n=new t.IcosahedronGeometry(z,4);(dt=new t.Mesh(n,e)).layers.set(nt),dt.receiveShadow=!0,Vt.add(dt);for(var a={},i=[],r=0;r<n.vertices.length;++r){var s=n.vertices[r];s.x*s.x+s.y*s.y>100&&s.x*s.y-s.z>14||s.y*s.x+s.y*s.z>50&&s.y*s.x+s.y*s.z<65||s.y*s.z*s.z-s.x*s.x<-300||s.x*s.z-s.x*s.y>60||s.x-s.y+s.x*s.z>55||s.x-(s.y+50)*(s.z-20)>1400&&s.y*s.x>200||s.x*s.y-s.x<-50||(s.x-50)*s.z-s.x*s.y*8<-500||s.y*s.y-30*s.z-50*s.y+20*s.x<-490&&s.y>6||s.z<-8&&s.x>2||s.y*s.y-s.z+10*s.x>110?(n.vertices[r].multiplyScalar(.6),i.push(0)):i.push(1)}for(St=[],r=0;r<n.faces.length;++r){var o=n.faces[r];i[o.a]&&i[o.b]&&i[o.c]?(St.push(5),a[o.a]=2,a[o.b]=2,a[o.c]=2):St.push(-10)}for(var h=1;h>-4;--h)for(r=0;r<n.faces.length;++r){o=n.faces[r];var u=a[o.a]>h,c=a[o.b]>h,E=a[o.c]>h;u&&c&&E||!(u||c||E)?a[o.a]>=h&&a[o.b]>=h&&(St[r]=Math.max(h,St[r])):(St[r]=h,a[o.a]=null==a[o.a]?h:Math.max(h,a[o.a]),a[o.b]=null==a[o.b]?h:Math.max(h,a[o.b]),a[o.c]=null==a[o.c]?h:Math.max(h,a[o.c]))}St.forEach(function(e,n){It.geometry.faces[n].color=new t.Color(e>=1?re.X[0]:re.X[Math.min(1-e,re.X.length-1)])}),It.geometry.colorsNeedUpdate=!0,n.verticesNeedUpdate=!0}(),function(){var e=new t.Group;Vt.add(e);for(var n=0;n<3e3;++n){var i=new t.MeshBasicMaterial({color:"#999",opacity:.8*Math.random(),transparent:!0}),r=new t.TetrahedronGeometry(Math.random(),0),s=new t.Mesh(r,i),o=150*(2*Math.random()+1),h=new t.Spherical(o);h.phi=De(2*a),h.theta=De(2*a),s.position.setFromSphericalCoords(o,h.phi,h.theta),s.rotation.set(Math.random()*a*2,Math.random()*a*2,Math.random()*a*2),s.scale.setScalar(De(6)),e.add(s)}}(),Vt.add(_t),L.add(Vt),ue.rt(),ce.rt({At:fe}),D=new t.WebGLRenderer({antialias:!0,alpha:!0}),x=e.devicePixelRatio?e.devicePixelRatio:1,D.setPixelRatio(x),D.autoClear=!1,D.setClearColor(re.Q,0),D.xr.enabled=!0,n.body.appendChild(D.domElement),Y=y("u"),F=Y.getContext("2d"),$e(),yt=new t.Clock,e.addEventListener("resize",$e,!1),n.addEventListener("keydown",function(t){var n=13,a=[n,32].indexOf(t.keyCode)>-1,i=!a&&he.includes(t.keyCode);i&&Qt!==Et.p||(Pt[t.keyCode]=!0),Jt===ft.G?a&&(Oe(ft.P),$.n()):Jt===ft.V?ie||(ie=!0,Gt=Date.now()):Jt!==ft.B&&Jt!==ft._||t.keyCode===n&&(e.location.href=S?"?t=0":"")}),n.addEventListener("keyup",function(t){Pt[t.keyCode]=!1,32===t.keyCode&&(oe=!0)}),k=new t.VRControls(m),Oe(ft.G),Ae(),y("x").innerHTML="PRESS ENTER"}catch(t){}}(THREE,window,document,Math.PI);